{% extends "base.html" %}

{% block content %}
    <div class="row" style="text-align: center;">
        <h3>NotHandsFree</h3>
    </div>
    <div class="row">
        <div class="col-md-4 col-md-offset-4" style="text-align: center;">
            <h2><i class="fa fa-flag-checkered"></i> Select Mode</h2>
        </div>
    </div>
{% endblock %}

{% block js %}
<script type="text/javascript">
var receiver = new WebSocket("ws://" + location.host + "/ws");

var phase = 0;
var mode, dest, content = null;


receiver.onmessage = function(message){
    data = message['data'].replace(/'/g, '"');
    data = JSON.parse(data);

    mode_gestures = Array(
        "newcall"
    )

    console.log(data);

    if (phase === 0) {
        console.log(data['gesture']);
        // We're in the Mode Select Phase
        if (mode_gestures.indexOf(data['gesture']) != -1) {
            // We have a new Mode!
            console.log("New Mode");
            if (data['gesture'] === 'newcall') {
                console.log("New Call Time!");
            }
        }
    }
};

$(document).ready(function(){

});
</script>
{% endblock %}